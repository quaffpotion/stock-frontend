<div style="width:300px;height:200px">
  <svg
    width="100%"
    height="100%"
    preserveAspectRatio="none"
    [attr.viewBox]="getViewBox(data)"
  >
    <g
      *ngFor="let stock of data; index as candleposition"
      transform="scale(1 -1)"
    >
      <rect
        [attr.x]="candleposition + 0.4"
        [attr.y]="min(stock.open, stock.close, stock.high, stock.low)"
        [attr.height]="this.minmax(stock)"
        width="0.2"
        attr.fill="{{ upday(stock) }}"
      ></rect>
      <rect
        [attr.x]="candleposition"
        [attr.y]="min(stock.open, stock.close)"
        [attr.height]="abs(stock.open - stock.close)"
        width="1"
        attr.fill="{{ upday(stock) }}"
      ></rect>
    </g>
  </svg>
</div>
